Administrative Isabelle cronjob
===============================

- main server: virtual machine with cronjob and build_log database
- backup file-system (for cumulative log files): i21isatest@lxbroy10:cronjob
- backup identify job: i21isatest@lxcisa0

- jobs: manual installation on target directory:
    cp "$ISABELLE_HOME/Admin/cronjob/self_update "$HOME/cronjob/self_update"
    cp "$ISABELLE_HOME/Admin/cronjob/plain_identify "$HOME/cronjob/plain_identify"

- crontab: manual update on target machine
    crontab -l
    crontab -e

- $HOME/cronjob/run/ -- run-time state

- $HOME/cronjob/log/ -- cumulative log area


Build Log Database Server
=========================

- Ubuntu 24.04 LTS Linux Server standard installation
  https://documentation.ubuntu.com/server/how-to/databases/install-postgresql

- apt install unattended-upgrades

- special user account:
  useradd -m -s /bin/bash isatest

- PostgreSQL:

  $ apt install postgresql
  $ apt install postgresql-client

  $ sudo -u postgres psql template1
  ALTER USER postgres with encrypted password '***';

  $ /etc/postgresql/16/main/pg_hba.conf
  scram-sha-256 ~> md5

  $ systemctl restart postgresql.service

  $ createuser -U postgres --pwprompt isatest
  $ createdb -U postgres --encoding=UTF8 --locale=en_US.utf8 --template=template0 --owner=isatest build_log

- Database backup or migration:
  https://www.postgresql.org/docs/16/backup-dump.html

     pg_dump -U postgres --format=custom -v build_log > db.dump
  pg_restore -U postgres --format=custom -v --dbname=build_log < db.dump
